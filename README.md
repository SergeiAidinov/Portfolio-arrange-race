<h1>Задание:</h1>
1. Готовый код перенести в новый проект.</br>
2. Организуем гонки:</br>
<ul>
<li>Все участники должны стартовать одновременно, несмотря на то, что на подготовку у каждого из них уходит разное время.</li>
<li>В туннель не может заехать одновременно больше половины участников (условность).</li>
<li>Попробуйте всё это синхронизировать.</li>
<li>Только после того как все завершат гонку, нужно выдать объявление об окончании.</li>
<li>Можете корректировать классы (в т.ч. конструктор машин) и добавлять объекты классов из пакета util.concurrent.</li>
</ul>
</br>

<h2>Пример выполнения кода до корректировки:</h2></br>

ВАЖНОЕ ОБЪЯВЛЕНИЕ >>> Подготовка!!!</br>
Участник #2 готовится</br>
ВАЖНОЕ ОБЪЯВЛЕНИЕ >>> Гонка началась!!!</br>
ВАЖНОЕ ОБЪЯВЛЕНИЕ >>> Гонка закончилась!!!</br>
Участник #1 готовится</br>
Участник #4 готовится</br>
Участник #3 готовится</br>
Участник #3 готов</br>
Участник #3 начал этап: Дорога 60 метров</br>
Участник #2 готов</br>
Участник #2 начал этап: Дорога 60 метров</br>
Участник #1 готов</br>
Участник #1 начал этап: Дорога 60 метров</br>
Участник #4 готов</br>
Участник #4 начал этап: Дорога 60 метров</br>
Участник #3 закончил этап: Дорога 60 метров</br>
Участник #3 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #3 начал этап: Тоннель 80 метров</br>
Участник #2 закончил этап: Дорога 60 метров</br>
Участник #2 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #2 начал этап: Тоннель 80 метров</br>
Участник #1 закончил этап: Дорога 60 метров</br>
Участник #1 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #1 начал этап: Тоннель 80 метров</br>
Участник #4 закончил этап: Дорога 60 метров</br>
Участник #4 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #4 начал этап: Тоннель 80 метров</br>
Участник #2 закончил этап: Тоннель 80 метров</br>
Участник #2 начал этап: Дорога 40 метров</br>
Участник #3 закончил этап: Тоннель 80 метров</br>
Участник #3 начал этап: Дорога 40 метров</br>
Участник #2 закончил этап: Дорога 40 метров</br>
Участник #1 закончил этап: Тоннель 80 метров</br>
Участник #1 начал этап: Дорога 40 метров</br>
Участник #4 закончил этап: Тоннель 80 метров</br>
Участник #4 начал этап: Дорога 40 метров</br>
Участник #3 закончил этап: Дорога 40 метров</br>
Участник #1 закончил этап: Дорога 40 метров</br>
Участник #4 закончил этап: Дорога 40 метров</br>
</br>
<h2>Что примерно должно получиться:</h2>
</br>
ВАЖНОЕ ОБЪЯВЛЕНИЕ >>> Подготовка!!!</br>
Участник #2 готовится</br>
Участник #1 готовится</br>
Участник #4 готовится</br>
Участник #3 готовится</br>
Участник #2 готов</br>
Участник #4 готов</br>
Участник #1 готов</br>
Участник #3 готов</br>
ВАЖНОЕ ОБЪЯВЛЕНИЕ >>> Гонка началась!!!</br>
Участник #2 начал этап: Дорога 60 метров</br>
Участник #4 начал этап: Дорога 60 метров</br>
Участник #3 начал этап: Дорога 60 метров</br>
Участник #1 начал этап: Дорога 60 метров</br>
Участник #1 закончил этап: Дорога 60 метров</br>
Участник #3 закончил этап: Дорога 60 метров</br>
Участник #3 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #1 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #1 начал этап: Тоннель 80 метров</br>
Участник #3 начал этап: Тоннель 80 метров</br>
Участник #4 закончил этап: Дорога 60 метров</br>
Участник #4 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #2 закончил этап: Дорога 60 метров</br>
Участник #2 готовится к этапу(ждет): Тоннель 80 метров</br>
Участник #3 закончил этап: Тоннель 80 метров</br>
Участник #1 закончил этап: Тоннель 80 метров</br>
Участник #2 начал этап: Тоннель 80 метров</br>
Участник #4 начал этап: Тоннель 80 метров</br>
Участник #3 начал этап: Дорога 40 метров</br>
Участник #1 начал этап: Дорога 40 метров</br>
Участник #3 закончил этап: Дорога 40 метров</br>
Участник #3 - WIN</br>
Участник #1 закончил этап: Дорога 40 метров</br>
Участник #4 закончил этап: Тоннель 80 метров</br>
Участник #4 начал этап: Дорога 40 метров</br>
Участник #2 закончил этап: Тоннель 80 метров</br>
Участник #2 начал этап: Дорога 40 метров</br>
Участник #2 закончил этап: Дорога 40 метров</br>
Участник #4 закончил этап: Дорога 40 метров</br>
ВАЖНОЕ ОБЪЯВЛЕНИЕ >>> Гонка закончилась!!!</br>
</br>
<h1>Мой комментарий:</h1>
Здесь я решил проявить инициативу, на чем и погорел: вместо использования Semaphore создал атомарную переменную carsInTunnel в MainClass, которая содержит сведения о количестве машин в тоннеле. Поскольку количество машин может изменяться только при выезде или въезде, я создал метод checkCarsInTunnel, которому передается в качестве параметра перечислимый тип (ENTERED — машина въехала, LEFT — машина выехала). Соответственно, метод checkCarsInTunnel инкрементирует или декрементирует переменную carsInTunnel. Также есть метод getCarsInTunnel(), который возвращает количество машин в тоннеле в данный момент. Оба метода синхронизированы по объекту monitor. Также я создал свое исключение TunnelOverLoad, которое выбрасывается, если количество машин в тоннеле превысит разрешенное или, наоборот, станет отрицательным. 
Так вот, примерно в половине случаев исключение выбрасывается!!! Причем иногда в качестве машин в тоннеле в исключении указывается две машины, т. е. разрешенная величина! Выходит, что атомарная переменная carsInTunnel меняется в процессе создания исключения. Пробовал объединять методы checkCarsInTunnel и getCarsInTunnel() в один (тогда добавлялся еще параметр GET) — ничего не помогает. Также экспериментировал с обычной int переменной для сохранения количества машин, тоже не помогло. 
Происходит то, чего происходить просто не может! Другие способы синхронизации пробовать не стал, т. к. хотел освоить вызов метода с модификатором synchronized.

